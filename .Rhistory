rename("Leaf_position" = "Leaf_Position") %>%
rename("Data_QC" = "...244") %>%
rmv_stbl()
`data_2022-08-07-0941_walkup_aci_clean.xlsx` <- `data_2022-08-07-0941_walkup_aci_clean.xlsx` %>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...244") %>%
rmv_stbl()
`data_2022-08-11-0904_walkup_aci_clean.xlsx` <- `data_2022-08-11-0904_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rmv_stbl()
`data_2022-08-11-0949_walkup_aci_clean.xlsx` <- `data_2022-08-11-0949_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rmv_stbl()
`data_2022-08-11-1050_walkup_aci_clean.xlsx` <- `data_2022-08-11-1050_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-12-0928_walkup_aci_clean.xlsx` <- `data_2022-08-12-0928_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-13-1007_walkup_aci_clean.xlsx` <- `data_2022-08-13-1007_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-14-0906_walkup_aci_clean.xlsx` <- `data_2022-08-14-0906_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-08-0854_walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-08-0854_walkup_aci_clean.xlsx`)
`data_2022-08-09-0911_walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-09-0911_walkup_aci_clean.xlsx`)
`data_2022-08-10-0854_walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-10-0854_walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-16-walkup_aci_clean.xlsx`)
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
## Fix data columns into the same kind of data
`data_2022-08-06-1020_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-06-1020_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-07-0941_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-07-0941_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-11-0904_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-11-0904_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-11-0949_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-11-0949_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-11-1050_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-11-1050_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-12-0928_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-12-0928_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-13-1007_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-13-1007_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-14-0906_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-14-0906_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-08-0854_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-08-0854_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-09-0911_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-09-0911_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-10-0854_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-10-0854_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_position")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...5" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...5")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_number" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_number")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...5" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...5")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
View(`data_2022-08-16-walkup_aci_clean.xlsx`)
colnames(`data_2022-08-16-walkup_aci_clean.xlsx`)
which(duplicated(names(`data_2022-08-16-walkup_aci_clean.xlsx`)))
`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...111" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...111")
?read_xlsx
`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...111" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...111")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx`$"State" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"State")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
for (i in 1:length(aci_files_nm)) {
files1 <- read_xlsx(path = paste0("C:/Users/emmel/Desktop/DAT_proj/", aci_files_nm[i]),
sheet = "Measurements", skip = 14)
sliced <- slice(files1, -(1))
assign(paste0("data_", aci_files_nm[i]), sliced)
}
View(`data_2022-08-16-walkup_aci_clean.xlsx`)
View(`data_2022-08-06-1020_walkup_aci_clean.xlsx`)
?bind_rows
## Make a function to remove all the stability criteria columns, since they are uneven
## across files
rmv_stbl <- function(file_name) {
file_name <- file_name[,!grepl(":", colnames(file_name))]
}
## Rename the different columns and remove stability columns
`data_2022-08-06-1020_walkup_aci_clean.xlsx` <- `data_2022-08-06-1020_walkup_aci_clean.xlsx` %>%
rename("Leaf_position" = "Leaf_Position") %>%
rename("Data_QC" = "...244") %>%
rmv_stbl()
`data_2022-08-07-0941_walkup_aci_clean.xlsx` <- `data_2022-08-07-0941_walkup_aci_clean.xlsx` %>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...244") %>%
rmv_stbl()
`data_2022-08-11-0904_walkup_aci_clean.xlsx` <- `data_2022-08-11-0904_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rmv_stbl()
`data_2022-08-11-0949_walkup_aci_clean.xlsx` <- `data_2022-08-11-0949_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rmv_stbl()
`data_2022-08-11-1050_walkup_aci_clean.xlsx` <- `data_2022-08-11-1050_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-12-0928_walkup_aci_clean.xlsx` <- `data_2022-08-12-0928_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-13-1007_walkup_aci_clean.xlsx` <- `data_2022-08-13-1007_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-14-0906_walkup_aci_clean.xlsx` <- `data_2022-08-14-0906_walkup_aci_clean.xlsx`%>%
rename("Tree_Identifier" = "Tree Identifier") %>%
rename("Data_QC" = "...248") %>%
rmv_stbl()
`data_2022-08-08-0854_walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-08-0854_walkup_aci_clean.xlsx`)
`data_2022-08-09-0911_walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-09-0911_walkup_aci_clean.xlsx`)
`data_2022-08-10-0854_walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-10-0854_walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx` <- rmv_stbl(`data_2022-08-16-walkup_aci_clean.xlsx`)
## Fix data columns into the same kind of data
`data_2022-08-06-1020_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-06-1020_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-07-0941_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-07-0941_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-11-0904_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-11-0904_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-11-0949_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-11-0949_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-11-1050_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-11-1050_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-12-0928_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-12-0928_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-13-1007_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-13-1007_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-14-0906_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-14-0906_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-08-0854_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-08-0854_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-09-0911_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-09-0911_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-10-0854_walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-10-0854_walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_position" <- as.numeric(`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_position")
`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...5" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...5")
`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_number" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"Leaf_number")
`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...111" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"hhmmss...111")
`data_2022-08-16-walkup_aci_clean.xlsx`$"State" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"State")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
`data_2022-08-16-walkup_aci_clean.xlsx`$"GPIO" <- as.character(`data_2022-08-16-walkup_aci_clean.xlsx`$"GPIO")
## Merge the data together
all_aci.df <- bind_rows(`data_2022-08-06-1020_walkup_aci_clean.xlsx`,
`data_2022-08-07-0941_walkup_aci_clean.xlsx`,
`data_2022-08-11-0904_walkup_aci_clean.xlsx`,
`data_2022-08-11-0949_walkup_aci_clean.xlsx`,
`data_2022-08-11-1050_walkup_aci_clean.xlsx`,
`data_2022-08-12-0928_walkup_aci_clean.xlsx`,
`data_2022-08-13-1007_walkup_aci_clean.xlsx`,
`data_2022-08-14-0906_walkup_aci_clean.xlsx`,
`data_2022-08-08-0854_walkup_aci_clean.xlsx`,
`data_2022-08-09-0911_walkup_aci_clean.xlsx`,
`data_2022-08-10-0854_walkup_aci_clean.xlsx`,
`data_2022-08-16-walkup_aci_clean.xlsx`)
## Clean the data by filtering out excluded points and After DAT points
all_aci_cln <- all_aci.df %>%
filter(Data_QC == "OK") %>%
filter(Data_point != "After_DAT")
View(all_aci_cln)
## Convert important columns to numeric
all_aci_cln_num <- all_aci_cln %>%
mutate(Ci = parse_number(Ci)) %>%
mutate(A = parse_number(A)) %>%
mutate(Ca = parse_number(Ca)) %>%
mutate(E = parse_number(E)) %>%
mutate(Qin = parse_number(Qin)) %>%
mutate(Tleaf = parse_number(Tleaf))
### adding a column for a four-letter species code and a column for species name
complete_sp <- all_aci_cln_num %>%
mutate(fourlettercode = Tree_Identifier, SciName = Tree_Identifier)
complete_sp$fourlettercode <- recode(complete_sp$fourlettercode,
'Maca1' = 'MAEL',
'Tree3' = 'CHTU',
'tree8' = 'COSP',
'Tree8' = 'COSP',
'tree9' = 'APCO',
'Tree10' = 'VICA',
'tree11' = 'COST',
'tree12' = 'UNKN',
'tree22' = 'ABMA',
'1' = 'TACH',
'4' = 'ESSP',
'Tree5' = 'ABMA',
'Tree6' = 'PRAP',
'Mela7' = 'MELA')
complete_sp$SciName <- recode(complete_sp$SciName,
'Maca1' = 'Manilkara elata',
'Tree3' = 'Chimaris turbinata',
'tree8' = 'Coussarea sp',
'Tree8' = 'Coussarea sp',
'tree9' = 'Aparisthmium cordatum',
'Tree10' = 'Vismia cayennensis',
'tree11' = 'Couratari stellata',
'tree12' = 'Unknown sp',
'tree22' = 'Abarema mataybifolia',
'1' = 'Tachigali chrysophylla',
'4' = 'Eschweilera sp.',
'Tree5' = 'Abarema mataybifolia',
'Tree6' = 'Protium apiculatum',
'Mela7' = 'Unknown sp.')
unique(complete_sp$fourlettercode)
complete_sp$fourlettercode <- recode(complete_sp$fourlettercode,
'Maca1' = 'MAEL',
'Tree3' = 'CHTU',
'tree8' = 'COSP',
'Tree8' = 'COSP',
'tree9' = 'APCO',
'Tree10' = 'VICA',
'tree11' = 'COST',
'tree12' = 'UNKN',
'tree22' = 'ABMA',
'1' = 'TACH',
'4' = 'ESSP',
'Tree5' = 'ABMA',
'Tree6' = 'PRAP',
'Mela7' = 'MELA',
'maca1' = 'MAEL')
complete_sp$SciName <- recode(complete_sp$SciName,
'Maca1' = 'Manilkara elata',
'Tree3' = 'Chimaris turbinata',
'tree8' = 'Coussarea sp',
'Tree8' = 'Coussarea sp',
'tree9' = 'Aparisthmium cordatum',
'Tree10' = 'Vismia cayennensis',
'tree11' = 'Couratari stellata',
'tree12' = 'Unknown sp',
'tree22' = 'Abarema mataybifolia',
'1' = 'Tachigali chrysophylla',
'4' = 'Eschweilera sp.',
'Tree5' = 'Abarema mataybifolia',
'Tree6' = 'Protium apiculatum',
'Mela7' = 'Unknown sp.',
'maca1' = 'Manilkara elata')
unique(complete_sp$fourlettercode)
# Save Complete Data File -------------------------------------------------
## Save the assembled file as a .csv
write.csv(x = complete_sp, file = "clean_aci_data_one_file.csv")
which(complete_sp$Ci < -50) #4 Ci values are super negative: 394, 395, 396, 398
complete_sp[c(394,395,396,398),19] # What are those values? Should they be outliers?
which(complete_sp$A > 31) # 2 A values greater than 31: 399 and 400
complete_sp[c(397,398,399,400,401),17]
cmplt.rm_out <- filter(complete_sp, Ci > -50 & A < 31)
## Group by Four Letter Code
cmplt.grp <- group_by(cmplt.rm_out, fourlettercode)
## Plot all ACi curves on one graph by Species
ggplot(cmplt.grp, mapping = aes(x = Ci, y = A, color = fourlettercode)) +
geom_point(mapping = aes(pch = Data_point)) +
theme_classic()
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point)) +
geom_point() +
theme_classic() +
scale_color_viridis_d()
gg1
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
plot(gg1)
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point)) +
geom_point() +
theme_classic() +
scale_color_viridis_d()
plot(gg1)
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
?ggplot
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point)) +
geom_point() +
theme_classic() +
scale_color_viridis_d() +
ggtitle(fourlettercode)
plot(gg1)
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point)) +
geom_point() +
theme_classic() +
scale_color_viridis_d() +
ggtitle(code)
plot(gg1)
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point,
pch = Leaf_number)) +
geom_point() +
theme_classic() +
scale_color_viridis_d() +
ggtitle(code)
plot(gg1)
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point)) +
geom_point(pch = Leaf_number) +
theme_classic() +
scale_color_viridis_d() +
ggtitle(code)
plot(gg1)
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
## Make and save plots for each individual species
for (code in unique(cmplt.grp$fourlettercode)) {
df1 <- cmplt.grp %>% filter(fourlettercode == code)
gg1 <- ggplot(data = df1, mapping = aes(x = Ci, y = A, color = Data_point)) +
geom_point() +
theme_classic() +
scale_color_viridis_d() +
ggtitle(code)
plot(gg1)
filename1 <- paste("plot_", code, ".png")
ggsave(filename1, gg1)
}
# Fit the ACi curves for each species for DAT and Traditional, respectively
######## This is the part that is broken :(
cmplt_DAT <- filter(cmplt.grp, Data_point == "Before_DAT")
DAT_fits <- fitacis(cmplt_DAT, group = "fourlettercode",
varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"), fitTPU = TRUE, Tcorrect = TRUE,
id = Leaf_number)
library(plantecophys)
DAT_fits <- fitacis(cmplt_DAT, group = "fourlettercode",
varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"), fitTPU = TRUE, Tcorrect = TRUE,
id = Leaf_number)
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in unique(cmplt_DAT$Leaf_number[code])){
fit <- fitaci(data = lf[i], varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in unique(cmplt_DAT$Leaf_number[code])){
fit <- fitaci(data = lfi, varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in unique(cmplt_DAT$Leaf_number[code])){
fit <- fitaci(data = lf, varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in unique(cmplt_DAT$Leaf_number[code])){
fit <- fitaci(cmplt_DAT[lf], varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in unique(cmplt_DAT$Leaf_number[code])){
fit <- fitaci(cmplt_DAT[[lf]], varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in unique(cmplt_DAT$Leaf_number[code])){
fit <- fitaci(lf, varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
fitaci
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in cmplt_DAT$Leaf_number[code]){
fit <- fitaci(lf, varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
#Possible for loop to fit aci curves for each leaf individually
for (code in unique(cmplt_DAT$fourlettercode)) {
for (lf in cmplt_DAT$Leaf_number[code]){
fit <- fitaci(data = cmplt_DAT[[lf]], varnames = list(ALEAF = "A", Tleaf = "Tleaf", Ci = "Ci",
PPFD = "Qin"),
fitTPU = FALSE, Tcorrect = TRUE)
assign(paste0("fit_", code[i]), fit)
}
# plot with fit
}
